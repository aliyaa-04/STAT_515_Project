{
  "hash": "7627fdd22c20b8a40b58f52e1eaf4ece",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Methodology and Results\"\nformat: html\n---\n\nIn this page, We shall discuss the methodology used in our project and discuss the findings and results.\n\n## Methodology\n\n#### I. SELECTION OF DATASET\n\nIn this project, We first selected our dataset from the 2021-2023 NHANES dataset. We then chose the following variables from the sub-datasets.\n\n1.  ***DEMO_L (demographic dataset)***\n\n    1.  **SEQN** → unique ID;\n\n    2.  **RIDAGEYR** → age in years;\n\n    3.  **RIAGENDR** → sex (1=male, 2=female);\n\n    4.  **RIDRETH3** → race/ethnicity;\n\n    5.  **INDFMPIR** → income-to-poverty ratio;\n\n    6.  **DMDMARTZ** → marital status;\n\n    7.  **DMDEDUC2** → education level;\n\nThese are predictors for chronic diseases.\n\n2.  ***BMX_L (BMI/ Body measurements)***\n\n    1.  **BMXWT** → weight\n\n    2.  **BMXHT** → height\n\n    3.  **BMXBMI** → BMI (body mass index)\n\n    4.  **BMXWAIST** → waist circumference\n\nThese variables are important as they are major risk factors for diabetes, hypertension, and heart disease.\n\n3.  ***BPXO_L (Blood pressure)***\n\n    1.  **OSBP** → systolic BP\n\n    2.  **ODBP** → diastolic BP\n\n    3.  **OSBPA**, **ODBPA** → averaged readings\n\nThese variables are important because blood pressure is a chronic disease indicator and a strong predictor for cardiovascular risk.\n\n4.  ***GHB_L (Glycohemaglobin)***\n\n    1.  **LBXGH** → HbA1c (%)\n\nThis variable is used to detect diabetes.\n\n5.  ***TCHOL_L (Total cholesterol)***\n\n    1.  **LBXTC** → total cholesterol (mg/dL)\n\nThis variable is a chronic disease predictor\n\n6.  ***DIQ_L (diabetes questionnaire)***\n\n    1.  **DIQ010** → “Doctor diagnosed diabetes?” (1=yes/ 2=no)\n\n    2.  **DIQ160** → “Borderline diabetes?”\n\n    3.  **DIQ050** → taking insulin?\n\nThis variable gives the main binary outcome for logistic regression.\n\n7.  ***SMQ_L (smoking questionnaire)***\n\n    1.  **SMQ020** → smoked at least 100 cigarettes\n\nThis variable is useful because smoking is a huge risk factor for many diseases and is a strong predictor.\n\n\\* We limited our dataset to include only adults (20 years and above) as major health risks are more likely to occur in them and including children could cause biases.\n\n#### II. Setting up dataset in RStudio\n\nAfter converting the .xpt file to a csv file using the \"haven\". We cleaned up our data and selected only the important variables which will be used during the project.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'haven' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'dplyr' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read.csv(\"nhanes_2021_2023_chronic_disease.csv\")\nhead(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    SEQN SDDSRVYR RIDSTATR RIAGENDR RIDAGEYR RIDAGEMN RIDRETH1 RIDRETH3\n1 130378       12        2        1       43       NA        5        6\n2 130379       12        2        1       66       NA        3        3\n3 130380       12        2        2       44       NA        2        2\n4 130384       12        1        1       43       NA        1        1\n5 130385       12        1        2       65       NA        3        3\n6 130386       12        2        1       34       NA        1        1\n  RIDEXMON RIDEXAGM DMQMILIZ DMDBORN4 DMDYRUSR DMDEDUC2 DMDMARTZ RIDEXPRG\n1        2       NA        2        2        6        5        1       NA\n2        2       NA        2        1       NA        5        1       NA\n3        1       NA        2        2        6        3        1        2\n4       NA       NA        2        2        5        2        3       NA\n5       NA       NA        2        1       NA        3        1       NA\n6        1       NA        2        1       NA        4        1       NA\n  DMDHHSIZ DMDHRGND DMDHRAGZ DMDHREDZ DMDHRMAZ DMDHSEDZ WTINT2YR WTMEC2YR\n1        4       NA       NA       NA       NA       NA 50055.45 54374.46\n2        2       NA       NA       NA       NA       NA 29087.45 34084.72\n3        7       NA       NA       NA       NA       NA 80062.67 81196.28\n4        2       NA       NA       NA       NA       NA 15078.75     0.00\n5        2       NA       NA       NA       NA       NA 16151.03     0.00\n6        3       NA       NA       NA       NA       NA 30995.28 39988.45\n  SDMVSTRA SDMVPSU INDFMPIR BMDSTATS BMXWT BMIWT BMXRECUM BMIRECUM BMXHEAD\n1      173       2     5.00        1  86.9    NA       NA       NA      NA\n2      173       2     5.00        1 101.8    NA       NA       NA      NA\n3      174       1     1.41        1  69.4    NA       NA       NA      NA\n4      179       2     0.63       NA    NA    NA       NA       NA      NA\n5      187       2     5.00       NA    NA    NA       NA       NA      NA\n6      179       1     1.33        1  90.6    NA       NA       NA      NA\n  BMIHEAD BMXHT BMIHT BMXBMI BMDBMIC BMXLEG BMILEG BMXARML BMIARML BMXARMC\n1      NA 179.5    NA   27.0      NA   42.8     NA    42.0      NA    35.7\n2      NA 174.2    NA   33.5      NA   38.5     NA    38.7      NA    33.7\n3      NA 152.9    NA   29.7      NA   38.5     NA    35.5      NA    36.3\n4      NA    NA    NA     NA      NA     NA     NA      NA      NA      NA\n5      NA    NA    NA     NA      NA     NA     NA      NA      NA      NA\n6      NA 173.3    NA   30.2      NA   42.8     NA    36.2      NA    35.7\n  BMIARMC BMXWAIST BMIWAIST BMXHIP BMIHIP BPAOARM BPAOCSZ BPXOSY1 BPXODI1\n1      NA     98.3       NA  102.9     NA       R       4     135      98\n2      NA    114.7       NA  112.4     NA       R       4     121      84\n3      NA     93.5       NA   98.0     NA       R       4     111      79\n4      NA       NA       NA     NA     NA    <NA>      NA      NA      NA\n5      NA       NA       NA     NA     NA    <NA>      NA      NA      NA\n6      NA    106.1       NA  110.6     NA       R       4     110      72\n  BPXOSY2 BPXODI2 BPXOSY3 BPXODI3 BPXOPLS1 BPXOPLS2 BPXOPLS3 WTPH2YR.x LBXGH\n1     131      96     132      94       82       79       82  56042.13   5.6\n2     117      76     113      76       72       71       73  37435.71   5.6\n3     112      80     104      76       84       83       77  85328.84   6.2\n4      NA      NA      NA      NA       NA       NA       NA        NA    NA\n5      NA      NA      NA      NA       NA       NA       NA        NA    NA\n6     120      74     115      75       59       64       64  44526.21   5.1\n  WTPH2YR.y LBXTC LBDTCSI DIQ010 DID040 DIQ160 DIQ180 DIQ050 DID060 DIQ060U\n1  56042.13   264    6.83      2     NA      2      2     NA     NA      NA\n2  37435.71   214    5.53      2     NA      2      1     NA     NA      NA\n3  85328.84   187    4.84      1     35     NA     NA      2     NA      NA\n4        NA    NA      NA      2     NA      2      2     NA     NA      NA\n5        NA    NA      NA      2     NA      1      1     NA     NA      NA\n6  44526.21   183    4.73      2     NA      2      2     NA     NA      NA\n  DIQ070 SMQ020 SMQ040 SMD641 SMD650 SMD100MN SMQ621 SMD630 SMAQUEX2\n1     NA      1      3     NA     NA       NA     NA     NA        1\n2     NA      1      3     NA     NA       NA     NA     NA        1\n3      1      2     NA     NA     NA       NA     NA     NA        1\n4     NA      2     NA     NA     NA       NA     NA     NA        1\n5      2      2     NA     NA     NA       NA     NA     NA        1\n6     NA      1      3     NA     NA       NA     NA     NA        1\n```\n\n\n:::\n:::\n\n\n#### III. Setting up libraries for visualization and removing missing values and special codes.\n\nNHANES uses special codes such as \"777\", \"999\", or \"refused\", \"NA\". and many more. We cleaned the new dataset to ensure there were no missing or invalid values. We also removed any duplicate values\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'corrplot' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\ncorrplot 0.95 loaded\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOriginal rows: 7809 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOriginal columns: 80 \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows after removing duplicate: 7809 \n```\n\n\n:::\n:::\n\n\n#### IV. Setting up key health variables\n\n\n::: {.cell}\n\n:::\n\n\n#### V. Conduction Basic Exploratory Analysis\n\nWe selected a few variables from the new dataset such as: RIDAGEYR, BMXBMI, BMXWT, BMXHT, BMXWAIST, SBP_mean, DBP_mean, LBXGH, LBXTC.\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(summary_vars)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    RIDAGEYR         BMXBMI          BMXWT            BMXHT      \n Min.   :20.00   Min.   :11.10   Min.   : 27.90   Min.   :133.0  \n 1st Qu.:38.00   1st Qu.:24.70   1st Qu.: 67.50   1st Qu.:159.6  \n Median :56.00   Median :28.50   Median : 79.80   Median :166.5  \n Mean   :53.37   Mean   :29.83   Mean   : 83.28   Mean   :166.9  \n 3rd Qu.:68.00   3rd Qu.:33.60   3rd Qu.: 95.40   3rd Qu.:174.2  \n Max.   :80.00   Max.   :74.80   Max.   :248.20   Max.   :200.7  \n NA's   :84      NA's   :1839    NA's   :1853     NA's   :1812   \n    BMXWAIST        SBP_mean        DBP_mean          LBXGH       \n Min.   : 60.0   Min.   : 70.0   Min.   : 34.00   Min.   : 3.200  \n 1st Qu.: 89.0   1st Qu.:110.7   1st Qu.: 67.33   1st Qu.: 5.200  \n Median : 99.7   Median :120.5   Median : 74.00   Median : 5.500  \n Mean   :101.2   Mean   :123.0   Mean   : 74.70   Mean   : 5.774  \n 3rd Qu.:111.5   3rd Qu.:132.7   3rd Qu.: 81.33   3rd Qu.: 5.900  \n Max.   :187.0   Max.   :232.3   Max.   :139.00   Max.   :17.100  \n NA's   :2104    NA's   :1947    NA's   :1949     NA's   :2090    \n     LBXTC      \n Min.   : 62.0  \n 1st Qu.:159.0  \n Median :185.0  \n Mean   :188.2  \n 3rd Qu.:214.0  \n Max.   :438.0  \n NA's   :2318   \n```\n\n\n:::\n:::\n\n\nThis statistical summary helps us quickly go through and understand the minimum, maximum and mean values of each variable.\n\nWe then created some visualizations to help understand the variables clearly.\n\n1.  Age Distribution Histogram\n\n\n    ::: {.cell}\n    ::: {.cell-output .cell-output-stderr}\n    \n    ```\n    Warning: Removed 84 rows containing non-finite outside the scale range\n    (`stat_bin()`).\n    ```\n    \n    \n    :::\n    \n    ::: {.cell-output-display}\n    ![](results_files/figure-html/unnamed-chunk-7-1.png){width=672}\n    :::\n    :::\n\n\n    This histogram helps us visually understand the age range of the individuals in the dataset. As we can see, there are more counts as the age increases.\n\n2.  BMI Distribution Histogram\n\n\n    ::: {.cell}\n    ::: {.cell-output .cell-output-stderr}\n    \n    ```\n    Warning: Removed 1839 rows containing non-finite outside the scale range\n    (`stat_bin()`).\n    ```\n    \n    \n    :::\n    \n    ::: {.cell-output-display}\n    ![](results_files/figure-html/unnamed-chunk-8-1.png){width=672}\n    :::\n    :::\n\n\n    This histogram shows that the graph is right-skewed. Most of the adults fall between 20 to 40 range.\n\n3.  Mean SBP histogram\n\n\n    ::: {.cell}\n    ::: {.cell-output .cell-output-stderr}\n    \n    ```\n    Warning: Removed 1947 rows containing non-finite outside the scale range\n    (`stat_bin()`).\n    ```\n    \n    \n    :::\n    \n    ::: {.cell-output-display}\n    ![](results_files/figure-html/unnamed-chunk-9-1.png){width=672}\n    :::\n    :::\n\n\nThis histogram shows a roughly normal distribution between 120 mmHg and 150 mmHg\n\n4.  Mean DBP histogram\n\n\n    ::: {.cell}\n    ::: {.cell-output .cell-output-stderr}\n    \n    ```\n    Warning: Removed 1949 rows containing non-finite outside the scale range\n    (`stat_bin()`).\n    ```\n    \n    \n    :::\n    \n    ::: {.cell-output-display}\n    ![](results_files/figure-html/unnamed-chunk-10-1.png){width=672}\n    :::\n    :::\n\n\nThis histogram shows a distribution of the Diastolic blood pressure between 60 mmHg and 90 mmHg.\n\n5.  Total Cholesterol Distribution\n\n\n    ::: {.cell}\n    ::: {.cell-output .cell-output-stderr}\n    \n    ```\n    Warning: Removed 2318 rows containing non-finite outside the scale range\n    (`stat_bin()`).\n    ```\n    \n    \n    :::\n    \n    ::: {.cell-output-display}\n    ![](results_files/figure-html/unnamed-chunk-11-1.png){width=672}\n    :::\n    :::\n\n\n    This histogram shows that it peaks around 180-220 mg/dL.\n\n6.  HbA1c Distribution Histogram\n\n\n    ::: {.cell}\n    ::: {.cell-output .cell-output-stderr}\n    \n    ```\n    Warning: Removed 2090 rows containing non-finite outside the scale range\n    (`stat_bin()`).\n    ```\n    \n    \n    :::\n    \n    ::: {.cell-output-display}\n    ![](results_files/figure-html/unnamed-chunk-12-1.png){width=672}\n    :::\n    :::\n\n\nThis histogram are heavily concentrated between 5% to 6%.\n\n7.  Correlation Matrix Heatmap\n\n\n    ::: {.cell}\n    \n    :::\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](results_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nThe correlation heatmap shows that BMI and waist circumference are strongly correlated, while blood pressure and cholesterol show moderate positive relationships with other metabolic indicators.\n\n#### VI. Answering Research Questions\n\n**(i)** Our first research question explores how BMI influences the risk of diabetes among adults. We first created a binary variable which indicates if a person has diabetes or not (based on the DIQ010 variable), where 1 = Diabetes and 0 = No Diabetes. We also dropped any values which were not available or missing. We then fit a logistic regression model with the diabetes as the response variable and the BMI as the predictor. The aim of this model is to predict if the chances of diabetes increases with BMI.\n\nWe also grouped the BMI values into 5 standard categories\\[3\\], **Underweight** (less than 18.5), **Normal** (between 18.5 and less than 25), **Overweight** (25 to less than 30), **Obese** ( 30 or greater) and **Severe Obese** (40 or greater).\n\nFor each BMI group we calculated the percentage of people with diabetes. We used a bar plot to visualize the result.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = diabetes ~ BMXBMI, family = \"binomial\", data = nhanes_rq1)\n\nCoefficients:\n             Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -3.612837   0.150813  -23.96   <2e-16 ***\nBMXBMI       0.058362   0.004556   12.81   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 4861.3  on 5969  degrees of freedom\nResidual deviance: 4702.2  on 5968  degrees of freedom\nAIC: 4706.2\n\nNumber of Fisher Scoring iterations: 4\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](results_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nThe logistic regression results show that BMI is a statistically significant predictor of diabetes (p \\< 2e-16). The positive coefficient (0.058) indicates that as BMI increases, the chances of having diabetes also increase. The barplot also helps us easily visualize the increase in the prevalence of diabetes as the BMI increases, with the normal category having a 0.07% chance of diabetes and the severe obese category having a 0.22% chance of diabetes.\n\n**(ii)** In our second research question, we explore and try to answer if we can predict diabetes using health risk factors such as BMI, HbA1c, blood pressure, cholesterol, and smoking status.\n\nWe selected another subset of variables to fit a logistic regression model. We then generated predicted probabilities and classified individuals as diabetic or non-diabetic, which allowed us to compare predicted versus actual outcomes through a confusion matrix. This model lets us to assess how each risk factor influences the likelihood of developing diabetes while accounting for the others.\n\nWe then created a classification tree with the same predictors to see how the variables split the data and which factors were most relevant for prediction. This tree is a simple graphical representation of the decision criteria that distinguish diabetics from non-diabetics. Together, these steps allows us to evaluate both statistical significance and prediction accuracy for diabetes risk.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = diabetes ~ BMXBMI + SBP_mean + DBP_mean + LBXGH + \n    LBXTC + smoker_ever, family = \"binomial\", data = log_r2)\n\nCoefficients:\n              Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -13.384834   0.727232 -18.405  < 2e-16 ***\nBMXBMI        0.045553   0.008362   5.448 5.10e-08 ***\nSBP_mean      0.018959   0.003937   4.816 1.47e-06 ***\nDBP_mean     -0.036323   0.006810  -5.334 9.61e-08 ***\nLBXGH         2.175551   0.090864  23.943  < 2e-16 ***\nLBXTC        -0.015141   0.001587  -9.541  < 2e-16 ***\nsmoker_ever   0.122853   0.120768   1.017    0.309    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 3983.3  on 4985  degrees of freedom\nResidual deviance: 2009.4  on 4979  degrees of freedom\nAIC: 2023.4\n\nNumber of Fisher Scoring iterations: 6\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n         Actual\nPredicted    0    1\n        0 4247  271\n        1   56  412\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tree' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](results_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nThe logistic regression results demonstrate that HbA1c (LBXGH) is the most powerful predictor of diabetes, with a large and highly significant coefficient (2.1755). BMI, systolic blood pressure, and cholesterol are all significant predictors of diabetes, but smoking status is not. The confusion matrix demonstrates that the model performs well overall: it properly categorised 4,247 non-diabetic individuals and 412 diabetic individuals, with just 271 false negatives and 56 false positives. With an accuracy of 93%. This suggests that the model can reasonably differentiate between diabetic and non-diabetic patients.\n\nThe tree also demonstrates that HbA1c is the main variable which splits the individuals into diabetic or non diabetic groups. If the A1c (blood glucose/sugar) value is less than 5.7, it is normal, but if it is greater than 6.5, the person is diabetic \\[4\\].\n\n**(iii)** In our third and final research question, we try to find if we can properly classify individuals into high vs low metabolic risk groups. To answer this question we created a new variable \"high_risk\". Indivizuals were going to be labeled high risk if they met the clinical points. That is, if their :\n\n-   AC1 levels (blood glucose levels, LBXGH) were 5.7 or higher \\[4\\];\n\n-   BMI levels (BMXMBI levels) were 30 or higher \\[3\\];\n\n-   Systolic blood pressure (SBP_mean) were 130 or higher \\[5\\];\n\n-   Total Cholesterol levels ( LBXTC) were 200 or higher \\[6\\].\n\n    We then chose the relevant predictors and used a logistic regression model to determine what factors predicted a high metabolic risk strongly. We also built a confusion matrix to assess how effectively the model predicted high- and low-risk individuals. Finally, we trained a random forest model to compare results and see whether a more flexible model increases prediction accuracy.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nglm(formula = high_risk ~ BMXBMI + SBP_mean + DBP_mean + LBXGH + \n    LBXTC + smoker_ever, family = \"binomial\", data = nhanes_rq3)\n\nCoefficients:\n              Estimate Std. Error z value Pr(>|z|)    \n(Intercept) -38.267231   1.347063 -28.408   <2e-16 ***\nBMXBMI        0.310497   0.014172  21.909   <2e-16 ***\nSBP_mean      0.079326   0.005235  15.154   <2e-16 ***\nDBP_mean     -0.017255   0.007484  -2.306   0.0211 *  \nLBXGH         2.845993   0.150698  18.885   <2e-16 ***\nLBXTC         0.042748   0.001912  22.355   <2e-16 ***\nsmoker_ever   0.272456   0.109407   2.490   0.0128 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 5189.7  on 5223  degrees of freedom\nResidual deviance: 2363.2  on 5217  degrees of freedom\nAIC: 2377.2\n\nNumber of Fisher Scoring iterations: 7\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n         Actual\nPredicted    0    1\n        0  696  202\n        1  335 3991\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'randomForest' was built under R version 4.5.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nrandomForest 4.7-1.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nType rfNews() to see new features/changes/bug fixes.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'randomForest'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:ggplot2':\n\n    margin\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:dplyr':\n\n    combine\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\n randomForest(formula = factor(high_risk) ~ BMXBMI + SBP_mean +      DBP_mean + LBXGH + LBXTC + smoker_ever, data = nhanes_rq3,      ntree = 200, mtry = 3) \n               Type of random forest: classification\n                     Number of trees: 200\nNo. of variables tried at each split: 3\n\n        OOB estimate of  error rate: 0%\nConfusion matrix:\n     0    1 class.error\n0 1031    0           0\n1    0 4193           0\n```\n\n\n:::\n:::\n\n\nThe logistic regression results indicates that all clinical factors are strong predictors of metabolic risk, particularly HbA1c, cholesterol, BMI and systolic blood pressure. All predictors had significant p-values(p\\<0.001), suggesting they do help identify individuals at high metabolic risk.\n\nThe confusion matrix also shows that the logistic model performs effectively, correctly identifying 696 low-risk and 3991 high-risk people, with only small misclassification in the low-risk group. This indicates that the model is very good at detecting high-risk individuals but less accurate for low-risk ones. The random forest model also performs extraordinarily well, with an error rate of 0%, indicating that it correctly identified all individuals in this sample.\n\n## Results\n\nAfter answering all the three research questions, our analysis showed that health factors such as BMI, HbA1c, blood pressure and cholesterol levels are very strong predictors of diabetes and overall metabolic risk. We were able to prove that BMI played a role in the prevalence of diabetes. Using a multivariable logistic model for diabetes prediction helps us analyse that HbA1c is the most influential predictor. The model not only performed well but also had an accuracy of 93%. The high and low risk classification model also showed a great performance as it achieved perfect accuracy.\n\n*NOTE: The random forest model has a 0% error rate since the high-risk variable was created with the same variables as the model (HbA1c, BMI, blood pressure, and cholesterol). Because these clinical cutoffs establish risk status, the random forest could exactly reproduce this rule. This outcome shows overfitting, rather than real prediction performance on unknown data.*\n",
    "supporting": [
      "results_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}